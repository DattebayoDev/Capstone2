<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mountain Search</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 20px;
      }
      .mountain-card {
        margin: 20px;
      }
      .mountain-img {
        width: 100%;
        max-width: 400px;
        border-radius: 8px;
      }
      #body {
        background-size: cover;
      }
    </style>
  </head>
  <body id="body">
    <h1>Search for a Mountain</h1>
    <label for="mountainSelect">Choose a mountain:</label>
    <select id="mountainSelect">
      <option value="">-- Select a Mountain --</option>
      <option value="Mount Washington">Mount Washington</option>
      <option value="Mount Lafayette">Mount Lafayette</option>
      <option value="Mount Monadnock">Mount Monadnock</option>
    </select>

    <div id="mountainCard" class="mountain-card" style="display:">
      <h2 id="mountainName"></h2>
    </div>

    <script>
      const GOOGLE_API_KEY = "AIzaSyBtMl6o8eWFYXMS8Z3LZx8gq4lzMSK1tZk"; // Replace with your API key
      const SEARCH_ENGINE_ID = "625dddd791a9b4de3"; // Replace with your Search Engine ID

      document
        .getElementById("mountainSelect")
        .addEventListener("change", async (event) => {
          const mountainName = event.target.value;
          if (!mountainName) return;

          // document.getElementById("mountainCard").style.display = "none";
          document.getElementById("mountainName").textContent = mountainName;

          try {
            const searchUrl = `https://www.googleapis.com/customsearch/v1?key=${GOOGLE_API_KEY}&cx=${SEARCH_ENGINE_ID}&q=${encodeURIComponent(
              mountainName
            )}&searchType=image&num=1&imgsz=large`;

            console.log("Fetching from URL:", searchUrl); // Log the search URL

            const response = await fetch(searchUrl);
            const data = await response.json();

            console.log("API response:", data); // Log the response data to inspect

            if (data.items && data.items.length > 0) {
              const imageUrl = data.items[0].link;
              console.log(imageUrl);
              document.getElementById(
                "body"
              ).style.backgroundImage = `url(${imageUrl})`;
            } else {
              console.log("No images found for this query.");
            }
          } catch (error) {
            console.error("Error fetching image:", error);
          }
        });
    </script>
  </body>
</html>
